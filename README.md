# KnowledgeBaseAI

React + TypeScript + Vite –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–æ–º –∑–Ω–∞–Ω–∏–π, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º.

---

## üõ†Ô∏è –ó–∞–ø—É—Å–∫ –∏ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è –≥—Ä–∞—Ñ, –ø–æ–∏—Å–∫ –∏ –ò–ò) —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—â–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Neo4j, Postgres, FastAPI).

### üê≥ –°–ø–æ—Å–æ–± 1: –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–≠—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø–æ–¥–Ω—è—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

1.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    ```bash
    cp .env.example .env.prod
    # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env.prod (–ø–∞—Ä–æ–ª–∏, —Ö–æ—Å—Ç—ã)
    ```

2.  **–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
    ```bash
    docker-compose up -d --build
    ```

3.  **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
    –ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
    ```bash
    # –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∞ –≤ Neo4j
    docker exec knowledgebase-fastapi-dev-1 python scripts/load_data.py
    docker exec knowledgebase-fastapi-dev-1 python scripts/push_to_neo4j.py
    ```

4.  **–î–æ—Å—Ç—É–ø:**
    *   Frontend: `http://localhost:5173`
    *   Backend API: `http://localhost:8000/docs`

---

### üíª –°–ø–æ—Å–æ–± 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–ï—Å–ª–∏ –±—ç–∫–µ–Ω–¥ —É–∂–µ –∑–∞–ø—É—â–µ–Ω (–≤ Docker –∏–ª–∏ —É–¥–∞–ª–µ–Ω–Ω–æ), –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π HMR-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
    ```bash
    cd frontend
    npm install
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API:**
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–¥–µ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –±—ç–∫–µ–Ω–¥–∞ (–æ–±—ã—á–Ω–æ `http://localhost:8000`).

3.  **–ó–∞–ø—É—Å–∫:**
    ```bash
    npm run dev
    ```

---

## üß≠ –≠–ø–∏–∫ 2: –ú–æ–¥—É–ª—å **Explore** (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ –≥—Ä–∞—Ñ–∞)

Explore ‚Äî —ç—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≥—Ä–∞—Ñ–∞ –∑–Ω–∞–Ω–∏–π –Ω–∞ `vis-network`, –∑–∞—Ç–æ—á–µ–Ω–Ω–∞—è –ø–æ–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏—é, –∞–Ω–∞–ª–∏–∑ –∏ –±—ã—Å—Ç—Ä—ã–µ ‚Äú—Ç–æ—á–µ—á–Ω—ã–µ‚Äù –¥–µ–π—Å—Ç–≤–∏—è.

### –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è (UX)

- **–û–¥–∏–Ω –∫–ª–∏–∫ –ø–æ —É–∑–ª—É**: –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∞–≤—ã–π —Å–∞–π–¥–±–∞—Ä —Å –¥–µ—Ç–∞–ª—è–º–∏ —É–∑–ª–∞.
- **–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ —É–∑–ª—É**: –¥–µ–ª–∞–µ—Ç —É–∑–µ–ª –Ω–æ–≤—ã–º —Ü–µ–Ω—Ç—Ä–æ–º –≥—Ä–∞—Ñ–∞ (–ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç viewport).
- **Kind**: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–∑–ª–æ–≤ –ø–æ —Ç–∏–ø—É (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).
- **Depth**: –≥–ª—É–±–∏–Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è viewport (–≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö).
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é**: –∫–∞–º–µ—Ä–∞ –∏ —Ä–∞—Å–∫–ª–∞–¥–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è ‚Äî –º–æ–∂–Ω–æ —É—Ö–æ–¥–∏—Ç—å/–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

---

### [EXP-01] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ `vis-network` (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**

- **`GraphContext`** —Ö—Ä–∞–Ω–∏—Ç ‚Äú–∂–∏–≤–æ–µ‚Äù —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥—Ä–∞—Ñ–∞: `viewport`, `selectedUid`, `depth`, `camera`, `positions`.
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `ExplorePage.tsx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ **–≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (—Å–æ–≤–ø–∞–¥–∞—é—Ç `selectedUid` –∏ `depth`) ‚Äî –µ—Å–ª–∏ –≤–∞–ª–∏–¥–µ–Ω, **–Ω–µ –¥–µ–ª–∞–µ–º `getViewport`**.
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–º–µ—Ä—ã –∏ –ø–æ–∑–∏—Ü–∏–∏ —É–∑–ª–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ `cleanup` (unmount/–ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ç–∏) –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏:
  - –∫–∞–º–µ—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `network.moveTo(...)` —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π;
  - –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (`stabilization.enabled = !isContextValid`) –∏ –∑–∞–ø—Ä–µ—â—ë–Ω –∞–≤—Ç–æ‚Äëfit (`stabilization.fit = false`).
- –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ React‚Äë—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è `useRef` (`networkRef`, `cameraRef`, `graphStateRef`), —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Ç—å –∏–∑‚Äë–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏**

- **–°–±—Ä–æ—Å –∫–∞–º–µ—Ä—ã** –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º `camera` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ `moveTo`.
- **–ü–æ—Ç–µ—Ä—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏** (—É–∑–ª—ã ‚Äú—Ä–∞–∑—ä–µ–∑–∂–∞–ª–∏—Å—å‚Äù –∑–∞–Ω–æ–≤–æ) ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º `getPositions()` –∏ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ—Ç–∫–ª—é—á–∞–µ–º —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é.
- **–ê–≤—Ç–æ‚Äë–∑—É–º/fit –æ—Ç vis-network** –ª–æ–º–∞–ª –∞–Ω–∞–ª–∏–∑ ‚Üí `stabilization.fit = false`, –∫–∞–º–µ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ–º —Å–∞–º–∏.
- **–†—ã–≤–∫–∏ –∏–∑-–∑–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è `Network`** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–∞–º–µ—Ä—ã ‚Üí –∫–∞–º–µ—Ä–∞ —É–±—Ä–∞–Ω–∞ –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∞, —á—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `graphStateRef`.
- **–ì–æ–Ω–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ `moveTo`** –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Ñ–ª–∞–≥–æ–º `isMounted`.

---

### [EXP-02] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —É–∑–ª–∞ (Sidebar/Drawer)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**

- –î–æ–±–∞–≤–ª–µ–Ω `NodeDetailsSidebar` (drawer —Å–ø—Ä–∞–≤–∞).
- –ù–∞ —Å–æ–±—ã—Ç–∏–µ `selectNode` –≤ `vis-network` –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è `detailsUid` ‚Üí —Å–∞–π–¥–±–∞—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ `uid`.
- –î–µ—Ç–∞–ª–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `useNodeDetails(uid)` ‚Üí UI –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `loading/error/empty`.
- –ö–Ω–æ–ø–∫–∞ **‚Äú–°–ø—Ä–æ—Å–∏—Ç—å AI‚Äù** –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `toggleChat()` (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Ç).

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏**

- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ –ø–æ —Ç–æ–º—É –∂–µ —É–∑–ª—É –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª —Å–∞–π–¥–±–∞—Ä** (—É–∑–µ–ª —É–∂–µ –≤—ã–¥–µ–ª–µ–Ω, `selectNode` –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç) ‚Üí –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –¥–µ–ª–∞–µ–º `networkRef.current?.unselectAll()`.
- **`setState` –ø–æ—Å–ª–µ unmount** –≤ –∑–∞–≥—Ä—É–∑–∫–µ –¥–µ—Ç–∞–ª–µ–π ‚Üí –≤ `useNodeDetails` –¥–æ–±–∞–≤–ª–µ–Ω `cancelled`‚Äë—Ñ–ª–∞–≥.

---

### [EXP-03] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ ‚Äú–ª–µ–≥–µ–Ω–¥–∞‚Äù –ø–æ —Ç–∏–ø–∞–º (Kind)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**

- –¢–∏–ø—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∏–∑ `viewport`** (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `kind`), –ø–ª—é—Å –æ–ø—Ü–∏—è `All`.
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ **–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API**: –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞–±–æ—Ä —É–∑–ª–æ–≤ –ø–µ—Ä–µ–¥ `toVisData(...)`.
- `kind` –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É 4.2 (`'concept' | 'skill' | 'resource'`) —á–µ—Ä–µ–∑ `APP_CONFIG.kindMap`, —Å fallback –Ω–∞ `defaultKind`.
- –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:
  - —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã –¥—É–±–ª–∏ —É–∑–ª–æ–≤ –ø–æ `uid` (—á–µ—Ä–µ–∑ `seenIds`);
  - –¥–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –≤ `label` –∏ `font.multi = true`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏**

- **–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–∏–ø—ã** –ª–æ–º–∞–ª–∏ —Ü–≤–µ—Ç–∞/—Ä–∞–∑–º–µ—Ä—ã —É–∑–ª–æ–≤ ‚Üí `kindMap` + fallback + –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å—Ç–∏–ª—è –≤ —Ç–µ–º–µ.
- **–î—É–±–ª–∏ `uid`** –≤—ã–∑—ã–≤–∞–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã/–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã `id` –≤ `vis-network` ‚Üí –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `seenIds`.
- **–î–ª–∏–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏** –¥–µ–ª–∞–ª–∏ –≥—Ä–∞—Ñ –Ω–µ—á–∏—Ç–∞–µ–º—ã–º ‚Üí –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫ + `font.multi = true`.
