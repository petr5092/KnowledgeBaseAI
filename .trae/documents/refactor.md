# –û—Ç—á—ë—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ (51d1a78)
## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤: `/root/KnowledgeBaseAI/services/question_selector.py:68`‚Äì`74`.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—Ä–æ–≤–Ω–µ–π –∑–Ω–∞–Ω–∏—è –ø–æ –≤–µ—Å—É: `/root/KnowledgeBaseAI/neo4j_utils.py:72`‚Äì`79`.
- –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ `ensure_constraints`: `/root/KnowledgeBaseAI/neo4j_utils.py:121`‚Äì`136`.
- –í–Ω–µ–¥—Ä—ë–Ω AtomicWrite –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ JSONL:
  - `/root/KnowledgeBaseAI/web_app.py:43`‚Äì`56`, `/root/KnowledgeBaseAI/web_app.py:50`‚Äì`56`.
  - `/root/KnowledgeBaseAI/kb_builder.py:30`‚Äì`40`, `/root/KnowledgeBaseAI/kb_builder.py:36`‚Äì`40`.
- –ü–µ—Ä–µ–≤–µ–¥—ë–Ω –≤–µ–∫—Ç–æ—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞ Qdrant:
  - –î–æ–±–∞–≤–ª–µ–Ω `qdrant_service`: `/root/KnowledgeBaseAI/src/services/vector/qdrant_service.py`.
  - –û–±–Ω–æ–≤–ª—ë–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: `/root/KnowledgeBaseAI/src/api/construct.py:4`‚Äì`7`, `/root/KnowledgeBaseAI/src/api/construct.py:31`‚Äì`37`.
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: `/root/KnowledgeBaseAI/requirements.txt`.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/v1/construct/magic_fill/queue`: `/root/KnowledgeBaseAI/src/api/construct.py:31`‚Äì`37`.
  - –í–æ—Ä–∫–µ—Ä ARQ: `/root/KnowledgeBaseAI/src/tasks/worker.py`.
  - WebSocket –ø—Ä–æ–≥—Ä–µ—Å—Å: `/root/KnowledgeBaseAI/src/api/ws.py`.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏:
  - `/v1/analytics/stats`: `/root/KnowledgeBaseAI/src/api/analytics.py:6`‚Äì`18`.
- –î–æ–±–∞–≤–ª–µ–Ω `curriculum.pathfind` –±–µ–∑ APOC:
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç: `/root/KnowledgeBaseAI/src/api/curriculum.py`.
  - –ü–æ–¥–∫–ª—é—á—ë–Ω —Ä–æ—É—Ç–µ—Ä: `/root/KnowledgeBaseAI/src/main.py:32`‚Äì`35`.
## –ü—Ä–æ–≤–µ—Ä–∫–∏
- –õ–∏–Ω–µ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º.
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π —Å–µ—Ä–≤–∏—Å: Qdrant URL –±–µ—Ä—ë—Ç—Å—è –∏–∑ `QDRANT_URL`; –∫–æ–ª–ª–µ–∫—Ü–∏—è `concepts` —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏.
- –û—á–µ—Ä–µ–¥—å: `POST /v1/construct/magic_fill/queue` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `job_id` –∏ –ø—É—Ç—å –¥–ª—è WebSocket; –≤–æ—Ä–∫–µ—Ä –ø—É–±–ª–∏–∫—É–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∫–∞–Ω–∞–ª `progress:{job_id}`.
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: –º–µ—Ç—Ä–∏–∫–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –≥—Ä–∞—Ñ–∞ Neo4j, –Ω–µ —Ç—Ä–µ–±—É—é—Ç APOC.
- Curriculum: –ø—É—Ç—å —Å—Ç—Ä–æ–∏—Ç—Å—è —á–µ—Ä–µ–∑ `PREREQ*0..` –±–µ–∑ –ø–ª–∞–≥–∏–Ω–æ–≤.
## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `qdrant-client` –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Qdrant (`QDRANT_URL`).
- –ó–∞–ø—É—Å—Ç–∏—Ç—å ARQ –≤–æ—Ä–∫–µ—Ä: `arq src.tasks.worker.WorkerSettings`.
- –ü—Ä–æ–∫—Å–∏/Traefik –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
## –°–ª–µ–¥—É—é—â–µ–µ
- –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ `fastapi_app.py` –≤ –º–æ–¥—É–ª—å–Ω—ã–µ —Ä–æ—É—Ç–µ—Ä—ã `src/api/*`.
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏: —Ç–æ–∫–µ–Ω—ã/cost/latency –∏ –∫–∞—á–µ—Å—Ç–≤–æ (—Å–∏—Ä–æ—Ç—ã/–º–µ—Ä–¥–∂–∏).
- –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã: `tests/` –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –º–æ–¥—É–ª–µ–π.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–µ: –¥–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/v1/admin/purge_users` –∏ —Ñ—É–Ω–∫—Ü–∏—è `purge_user_artifacts()` (`src/services/graph/neo4j_repo.py`, `src/api/admin.py`).
- –í—å—é–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω: `/v1/graph/viewport` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç—å —É–∑–ª–∞ –ø–æ `center_uid` –∏ –≥–ª—É–±–∏–Ω–µ (`src/api/graph.py`, `src/services/graph/neo4j_repo.py::neighbors`).
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Ä–æ–∂–Ω–æ–π –∫–∞—Ä—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ `plan_route(...)` –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/v1/graph/roadmap` (`src/services/roadmap_planner.py`, `src/api/graph.py`).
- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–Ω–∞–Ω–∏–π: –¥–æ–±–∞–≤–ª–µ–Ω `/v1/construct/propose` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π (–∫–æ–Ω—Ü–µ–ø—Ç—ã/–Ω–∞–≤—ã–∫–∏) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–∞ (`src/api/construct.py`).

## –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è API (—á–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
- –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ–¥ Headless:
  - `/v1/admin/curriculum*` (—Å–æ–∑–¥–∞–Ω–∏–µ, —É–∑–ª—ã, –ø—Ä–æ—Å–º–æ—Ç—Ä) ‚Äî `src/api/admin_curriculum.py`.
  - `/v1/admin/generate_subject*` ‚Äî `src/api/admin_generate.py`.
  - `/v1/levels/*` ‚Äî –±–∞–∑–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏ —Ç–µ–º—ã/–Ω–∞–≤—ã–∫–∞ ‚Äî `src/api/levels.py`.
  - –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –≤ `src/main.py`.
- –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ø–µ—Ä–µ–Ω–æ—Å –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏–∑ `fastapi_app.py` –ø–æ–¥ `src/api/*`.

## –ü–µ—Ä–µ–Ω–æ—Å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–æ—É—Ç–µ—Ä—ã:
  - `/v1/maintenance/*` ‚Äî –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ KB –∏ –ø–µ—Ä–µ—Å—á—ë—Ç —Å–≤—è–∑–µ–π.
  - `/v1/user/*` ‚Äî –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–µ—Å–æ–≤, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç.
  - `/v1/graphql` ‚Äî –±–∞–∑–æ–≤—ã–π GraphQL —Å–ª–æ–π —Å Neo4j –∏ Postgres —Ä–µ–∑–æ–ª–≤–µ—Ä–∞–º–∏.
- –û–±–Ω–æ–≤–ª—ë–Ω `src/main.py` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤.

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä
- –†–µ–∂–∏–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º —Å–≤—è–∑–µ–π (`contains`, `has_skill`, `PREREQ`, `targets`, `linked`) –∏ –∫–Ω–æ–ø–∫–∞ ¬´–û–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç—å¬ª –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –ø–æ–¥–≥—Ä—É–∑–∫–∏.

## –¢–µ—Å—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ Pytest —Ç–µ—Å—Ç—ã: planner, selector, levels, –∏–º–ø–æ—Ä—Ç.
## CI: Run tests\n- Use Pytest to run unit tests.\n- Install dependencies and run: pip install -r requirements.txt && pytest -q
## Migration
- fastapi_app.py now re-exports Headless app from src/main.py.
- GraphQL expanded: TopicDetails includes examples/errors (JSONL fallback).
- Integration tests added: GraphQL, curriculum without Postgres, planner, selector, levels.

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä—É (2025-12-13 04:52 UTC)

## –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (–¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

| –î–æ–∫—É–º–µ–Ω—Ç | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ/–∏–¥–µ—è | –°—Ç–∞—Ç—É—Å | –ì–¥–µ –≤ –∫–æ–¥–µ / –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---|---|---:|---|
| `Vision.md` | KnowledgeBaseAI –∫–∞–∫ —è–¥—Ä–æ/—Ñ–∞–±—Ä–∏–∫–∞ + API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º | ‚úÖ | `src/main.py:54-66`, —Ä–æ—É—Ç–µ—Ä—ã `src/api/*` |
| `Vision.md` | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ: KB –ø–∏—à–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –≤–Ω–µ—à–Ω—è—è LMS —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å | ‚úÖ | Roadmap/questions –ø—Ä–∏–Ω–∏–º–∞—é—Ç `progress` –∏–∑–≤–Ω–µ: `src/api/user.py:27-35`, `src/api/graph.py:42-71` |
| `knowledge_constructor.md` | Neo4j —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è (–±–µ–∑ User/Progress) | üü° | –í —Ü–µ–ª–æ–º —Å–æ–±–ª—é–¥–µ–Ω–æ, –Ω–æ –µ—Å—Ç—å legacy: `src/services/graph/utils.py:83-84` (`MERGE (:User ...)`) |
| `knowledge_constructor.md` | Stateless API: roadmap + adaptive questions –Ω–∞ –≤—Ö–æ–¥–Ω—ã—Ö –≤–µ—Å–∞—Ö | ‚úÖ | Roadmap: `src/api/user.py:32-35`, `src/api/graph.py:47-50`; Questions: `src/api/graph.py:60-71` |
| `knowledge_constructor.md` | Questions/examples –≤—ã–¥–∞—é—Ç—Å—è –∏–∑ KB (–Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è ‚Äú–∏–∑ –≤–æ–∑–¥—É—Ö–∞‚Äù) | ‚úÖ | `src/services/questions.py` (JSONL fallback + Neo4j –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏) |
| `knowledge_constructor.md` | Curriculum —Å–ª–æ–π –≤ Postgres, –Ω–µ –º—É—Ç–∏—Ä—É–µ—Ç –∫–∞–Ω–æ–Ω | ‚úÖ | `src/services/curriculum/repo.py`, `src/api/admin_curriculum.py` |
| `knowledge_constructor.md` | Async, verifiable KB pipeline (LLM ‚Üí validate ‚Üí review ‚Üí publish) | üü° | –ï—Å—Ç—å rebuild pipeline (thread-based): `src/services/jobs/rebuild.py`, `src/api/maintenance.py`; —Å—Ç–∞–¥–∏–π review/publish –Ω–µ—Ç |
| `knowledge_constructor.md` | Validators: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ publish | ‚ùå | `src/services/validation.py` ‚Äî –∑–∞–≥–ª—É—à–∫–∞ |
| `knowledge_model.md` / `base_concept.md` | –§–æ—Ä–º–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å Subject/Section/Topic/Skill/Method/Goal/Objective | üü° | –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Neo4j –µ—Å—Ç—å: `src/services/graph/utils.py:86+`, –Ω–æ –Ω–µ –≤—Å–µ –ø–æ–ª—è/enum –∏–∑ –¥–æ–∫–æ–≤ –æ—Ç—Ä–∞–∂–µ–Ω—ã |
| `knowledge_model.md` | Example/Question –∫–∞–∫ —Å—É—â–Ω–æ—Å—Ç—å –≥—Ä–∞—Ñ–∞ + —Å–≤—è–∑–∏ Example‚ÜîSkill/Error | üü° | API —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ JSONL; Neo4j-–≤–µ—Ç–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –æ–∂–∏–¥–∞–µ—Ç `HAS_QUESTION`, –Ω–æ `sync_from_jsonl()` –Ω–µ –≥—Ä—É–∑–∏—Ç `Question` |
| `knowledge_model.md` | difficulty –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0..1] | üü° | –í JSONL/README 1..5, –Ω–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ [0..1] –µ—Å—Ç—å: `src/services/questions.py:57-63,76-82` |
| `base_concept.md` | Neo4j constraints/indexes | ‚úÖ | `src/services/graph/utils.py:49-70` |
| `Vision.md` | Redis/Arq –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π/—Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á | üü° | –û—á–µ—Ä–µ–¥—å –µ—Å—Ç—å –¥–ª—è `magic_fill`: `src/api/construct.py:47-54`, `src/tasks/worker.py`; rebuild KB –Ω–µ –≤ –æ—á–µ—Ä–µ–¥–∏ |
| `Vision.md` | GraphQL —Å–ª–æ–π | üü° | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è: `src/main.py:15-18,64-65`; –µ—Å—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∏–º–ø–æ—Ä—Ç: `src/api/graphql.py:5` |

## TODO

- [x] –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ user-–ª–æ–≥–∏–∫–∏ –≤ –≥—Ä–∞—Ñ–æ–≤–æ–º —Å–ª–æ–µ (–≤ —Ç.—á. `ensure_user_profile` —Å `(:User)`): `src/services/graph/utils.py`.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Å–Ω–∞–ø—à–æ—Ç–∞ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞ (–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, DAG –¥–ª—è `PREREQ`, orphan-—É–∑–ª—ã): `src/services/validation.py`, `src/api/validation.py`.
- [x] –ü—Ä–∏–≤–µ—Å—Ç–∏ GraphQL –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∏–º–ø–æ—Ä—Ç–∞–º –∏ —Å–µ—Ä–≤–∏—Å–∞–º (`services.curriculum_repo` ‚Üí `src.services.curriculum.repo`): `src/api/graphql.py:5`.
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Äú–≤–æ–ø—Ä–æ—Å–æ–≤/–ø—Ä–∏–º–µ—Ä–æ–≤‚Äù –∫–∞–∫ JSONL (SSOT) –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—É—Ç–∏ –∫ KB: `src/services/kb/jsonl_io.py`, `src/services/questions.py`, `src/api/graphql.py`.
- [x] –í—ã—Ä–æ–≤–Ω—è—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: —É—Å—Ç–æ–π—á–∏–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ difficulty + –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ [0..1] –Ω–∞ –≤—ã–¥–∞—á–µ: `src/services/questions.py`.
- [ ] –ï—Å–ª–∏ –Ω—É–∂–µ–Ω ‚Äúverifiable pipeline‚Äù: –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–¥–∏–∏ staging/review/publish –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É publish –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ (—Å–µ–π—á–∞—Å rebuild ‚Äî —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π).
- [x] –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ rebuild KB –Ω–∞ –æ—á–µ—Ä–µ–¥—å (Redis/Arq) –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏–∑ Vision.

## –û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ (2025-12-13 05:07 UTC)

- –£–¥–∞–ª–µ–Ω –æ—Å—Ç–∞—Ç–æ–∫ user-–ª–æ–≥–∏–∫–∏ –∏–∑ –≥—Ä–∞—Ñ–æ–≤–æ–≥–æ —Å–ª–æ—è: —É–±—Ä–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è, —Å–æ–∑–¥–∞–≤–∞–≤—à–∞—è `(:User ...)` (`src/services/graph/utils.py`).
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–Ω–∞–ø—à–æ—Ç–∞ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ –≥—Ä–∞—Ñ–∞: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ nodes/edges, —Å—Å—ã–ª–æ—á–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, –∑–∞–ø—Ä–µ—Ç user-—É–∑–ª–æ–≤, –¥–µ—Ç–µ–∫—Ç —Ü–∏–∫–ª–æ–≤ `PREREQ`, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ orphan-—É–∑–ª–∞–º (`src/services/validation.py`).
- GraphQL –ø—Ä–∏–≤–µ–¥–µ–Ω –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∏–º–ø–æ—Ä—Ç–∞–º curriculum repo (`src/api/graphql.py`).
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –≤–æ–ø—Ä–æ—Å–æ–≤/–ø—Ä–∏–º–µ—Ä–æ–≤ –∫–∞–∫ JSONL (SSOT) –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ –ø–∞–ø–∫–µ `kb/` –¥–ª—è JSONL IO/—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤.
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ difficulty –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –≤–æ–ø—Ä–æ—Å–æ–≤: —É—Å—Ç–æ–π—á–∏–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ [0..1] (`src/services/questions.py`).
- –î–æ–±–∞–≤–ª–µ–Ω endpoint `/v1/maintenance/kb/pipeline_async` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ rebuild+validate (validate –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ rebuild).
- –î–æ–±–∞–≤–ª–µ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π auto-publish: –ø—Ä–∏ `auto_publish=true` –≤ `/v1/maintenance/kb/pipeline_async` –∏ –ø—Ä–∏ `validate.ok == true` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `kb:published:current`.

